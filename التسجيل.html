<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="icon" type="image/png" sizes="512x512" href="1769979851931.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOBA TECH | Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù‡ÙˆÙ„ÙˆØºØ±Ø§Ù…ÙŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@400;700&display=swap');
        
        :root { 
            --main: #00f2ff; /* Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ù‡ÙˆÙ„ÙˆØºØ±Ø§Ù…ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
            --bg: #050a0f; 
            --card-bg: rgba(0, 20, 40, 0.7);
        }

        body { 
            margin: 0; 
            font-family: 'Cairo', sans-serif; 
            background: var(--bg); 
            color: white; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            min-height: 100vh; 
            overflow: hidden; 
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .grid-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(rgba(0, 242, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 242, 255, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -2;
        }

        .bg-glow { 
            position: absolute; 
            width: 400px; 
            height: 400px; 
            background: var(--main); 
            filter: blur(150px); 
            border-radius: 50%; 
            z-index: -1; 
            opacity: 0.15; 
            animation: move 12s infinite alternate; 
        }

        @keyframes move { from { transform: translate(-30%, -30%); } to { transform: translate(30%, 30%); } }

        /* Ø§Ù„ÙƒØ§Ø±Øª Ø§Ù„Ù‡ÙˆÙ„ÙˆØºØ±Ø§Ù…ÙŠ */
        .auth-card { 
            background: var(--card-bg); 
            padding: 40px 30px; 
            border-radius: 20px; 
            border: 2px solid var(--main); 
            width: 360px; 
            text-align: center; 
            backdrop-filter: blur(15px); 
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.2), inset 0 0 20px rgba(0, 242, 255, 0.1); 
            position: relative;
            animation: float 4s ease-in-out infinite;
        }

        /* Ø®Ø· Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ */
        .auth-card::after {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 2px;
            background: rgba(0, 242, 255, 0.4);
            box-shadow: 0 0 10px var(--main);
            animation: scan 4s linear infinite;
        }

        @keyframes scan { 0% { top: 0%; } 100% { top: 100%; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        h2 { 
            font-family: 'Orbitron', sans-serif;
            color: var(--main); 
            font-size: 28px; 
            margin-bottom: 5px; 
            letter-spacing: 3px;
            text-shadow: 0 0 15px var(--main);
        }

        p { font-size: 14px; color: #88c9cc; margin-bottom: 25px; }

        input, select { 
            width: 100%; 
            padding: 12px; 
            margin-top: 12px; 
            background: rgba(0, 242, 255, 0.05); 
            border: 1px solid rgba(0, 242, 255, 0.2); 
            border-radius: 8px; 
            color: white; 
            outline: none; 
            box-sizing: border-box; 
            font-family: 'Cairo'; 
            transition: 0.3s;
        }

        input:focus { border-color: var(--main); box-shadow: 0 0 10px rgba(0, 242, 255, 0.3); }

        .btn-auth { 
            width: 100%; 
            padding: 14px; 
            background: transparent; 
            border: 1px solid var(--main); 
            color: var(--main); 
            border-radius: 8px; 
            font-weight: bold; 
            font-size: 16px; 
            cursor: pointer; 
            transition: 0.3s; 
            margin-top: 20px; 
            font-family: 'Orbitron', 'Cairo';
            text-transform: uppercase;
        }

        .btn-auth:hover { 
            background: var(--main); 
            color: #050a0f; 
            box-shadow: 0 0 25px var(--main); 
        }

        .switch { margin-top: 20px; font-size: 13px; color: #888; }
        .switch span { color: var(--main); cursor: pointer; font-weight: bold; }
        #error-msg { color: #ff4444; font-size: 12px; margin-top: 10px; min-height: 18px; }

        ::placeholder { color: rgba(0, 242, 255, 0.4); }
   
   </style>
</head>
<body>

<div class="grid-bg"></div>
<div class="bg-glow"></div>

<div class="auth-card">
    <h2 id="card-title">HOBA TECH</h2>
    <p id="card-desc"> Ù…Ø±Ø­Ø¨Ø§ Ø¨ÙƒÙ… ÙÙŠ Ù‡ÙˆØ¨Ø§ ØªÙŠÙƒ| HOBA TECH</p>

    <div id="login-box">
        <input type="email" id="l-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        <input type="password" id="l-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
        <button class="btn-auth" onclick="handleLogin()">ACCESS SYSTEM</button>
        <div class="switch">
            Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØªØµØ±ÙŠØ­ØŸ <span onclick="toggle('signup')">Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø¬Ø¯ÙŠØ¯</span><br><br>
            <span onclick="toggle('forgot')">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù‡ÙˆÙŠØ©ØŸ</span>
        </div>
    </div>

    <div id="signup-box" style="display: none;">
        <input type="text" id="s-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="tel" id="s-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
        <select id="s-group">
            <option value="" disabled selected>Ø§Ø®ØªØ± Ø§Ù„ÙØ±Ù‚Ø©</option>
            <option>Ø§Ù„ÙØ±Ù‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</option>
            <option disabled>Ø§Ù„ÙØ±Ù‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© ğŸ”’</option>
            <option disabled>Ø§Ù„ÙØ±Ù‚Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø© ğŸ”’</option>
            <option disabled>Ø§Ù„ÙØ±Ù‚Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© ğŸ”’</option>
        </select>
        <input type="email" id="s-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        <input type="password" id="s-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
        <button class="btn-auth" id="signup-btn" onclick="handleSignup()">INITIALIZE ACCOUNT</button>
        <div class="switch">Ù„Ø¯ÙŠÙƒ ØªØµØ±ÙŠØ­ Ø¯Ø®ÙˆÙ„ØŸ <span onclick="toggle('login')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span></div>
    </div>

    <div id="forgot-box" style="display: none;">
        <input type="email" id="f-email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©">
        <button class="btn-auth" onclick="handleReset()">RESET PASSWORD</button>
        <div class="switch">ØªØ°ÙƒØ±Øª Ø§Ù„Ù‡ÙˆÙŠØ©ØŸ <span onclick="toggle('login')">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¯Ø®ÙˆÙ„</span></div>
    </div>

    <div id="error-msg"></div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyAjpqfDdoxYs8rRBw4UKOrvtMoqBDB0Z_s",
      authDomain: "hoba-tech.firebaseapp.com",
      projectId: "hoba-tech",
      appId: "1:465948708700:web:dac008d1cb9f8caa50fb99"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const SHEET_URL = "https://script.google.com/macros/s/AKfycby8m3sDLRcTCmg8g6O-wvEFxgawEQ9bozWHVEgcrZG5hPqiFrFOAQszngFSHRhd94OTgw/exec";

    window.toggle = (view) => {
        document.getElementById('login-box').style.display = view === 'login' ? 'block' : 'none';
        document.getElementById('signup-box').style.display = view === 'signup' ? 'block' : 'none';
        document.getElementById('forgot-box').style.display = view === 'forgot' ? 'block' : 'none';
        document.getElementById('error-msg').innerText = "";
        document.getElementById('card-desc').innerText = view === 'signup' ? 'NEW PROTOCOL SETUP' : 'AUTHENTICATING USER...';
    };

    window.handleLogin = async () => {
        const email = document.getElementById("l-email").value.trim();
        const pass = document.getElementById("l-pass").value.trim();
        const msg = document.getElementById("error-msg");

        if(!email || !pass) { msg.innerText = "Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"; return; }

        try {
            await signInWithEmailAndPassword(auth, email, pass);
            msg.style.color = "#00ff00";
            msg.innerText = "ACCESS GRANTED... Redirecting";
            setTimeout(() => { window.location.href = "Ø¯Ø§Ø´ 4.html"; }, 1000);
        } catch (e) {
            msg.innerText = "ACCESS DENIED: Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
        }
    };

    window.handleSignup = async () => {
        const btn = document.getElementById("signup-btn");
        const msg = document.getElementById("error-msg");
        const name = document.getElementById("s-name").value.trim();
        const phone = document.getElementById("s-phone").value.trim();
        const email = document.getElementById("s-email").value.trim();
        const group = document.getElementById("s-group").value;
        const pass = document.getElementById("s-pass").value.trim();

        if (!name || !phone || !email || !group || !pass) {
            msg.innerText = "Ø¨Ø±Ø¬Ø§Ø¡ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„";
            return;
        }

        btn.disabled = true;
        btn.innerText = "PROCESSING...";

        try {
            await createUserWithEmailAndPassword(auth, email, pass);
            const finalUrl = `${SHEET_URL}?name=${encodeURIComponent(name)}&phone=${encodeURIComponent(phone)}&email=${encodeURIComponent(email)}&group=${encodeURIComponent(group)}&role=Ø¹Ø¶Ùˆ`;
            await fetch(finalUrl, { mode: 'no-cors' });

            msg.style.color = "#00ff00";
            msg.innerText = "PROTOCOL ESTABLISHED!";
            setTimeout(() => { window.location.href = "Ø¯Ø§Ø´ 4.html"; }, 1500);
        } catch (e) {
            btn.disabled = false;
            btn.innerText = "INITIALIZE ACCOUNT";
            msg.innerText = "ERROR: " + (e.code === 'auth/email-already-in-use' ? "Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹" : "ÙØ´Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…");
        }
    };
</script>
</body>
</html>
